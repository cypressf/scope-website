<!doctype html>
<!--[if IE 7 ]>    <html lang="en-gb" class="isie ie7 oldie no-js"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en-gb" class="isie ie8 oldie no-js"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en-gb" class="isie ie9 no-js"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en-gb" class="no-js"> <!--<![endif]-->

<head>
    <title>P2Feed</title>

    <meta charset="utf-8">
    <meta name="keywords" content="" />
    <meta name="description" content="" />

    <!-- Favicon --> 
    <link rel="shortcut icon" href="images/favicon.ico">

    <!-- this styles only adds some repairs on idevices  -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Google fonts - witch you want to use - (rest you can just remove) -->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic,700,700italic,800,800italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Raleway:100,200,300,400,500,600,700,800,900' rel='stylesheet' type='text/css'>

    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- ######### CSS STYLES ######### -->

    <link rel="stylesheet" href="css/reset.css" type="text/css" />
    <link rel="stylesheet" href="css/style.css" type="text/css" />


    <link rel="stylesheet" href="css/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" media="screen" href="css/responsive-leyouts.css" type="text/css" />
    <link rel="stylesheet" href="css/colors/lightblue.css" />

    <!-- mega menu -->
    <link href="js/mainmenu/sticky.css" rel="stylesheet">
    <link href="js/mainmenu/bootstrap.css" rel="stylesheet">
    <link href="js/mainmenu/fhmm.css" rel="stylesheet">
</head>

<body>
    <div class="site_wrapper">

        <header id="header">

            <div id="trueHeader">

                <div class="wrapper">

                    <div class="container">

                        <!-- Logo -->
                        <div class="logo"><a href="index.html" id="logo"></a></div>

                        <!-- Menu -->
                        <div class="menu_main">

                            <nav class="navbar navbar-default fhmm" role="navigation">
                                <ul class="nav navbar-nav">
                                    <li><a href="index.html">Home</a></li>
                                    <li><a href="why-do-we-care.html">Impact</a></li>
                                    <li><a href="offline-facebook.html">offline</a></li>
                                    <li><a href="demo.html">Demo</a></li>
                                    <li><a href="wifi-direct.html" class="active-page">WiFi-Direct</a></li>
                                    <li><a href="idea-to-product.html">Challenges</a></li>
                                    <li><a href="team.html">Team</a></li>
                                </ul><!-- end nav navbar-nav -->
                            </nav>

                        </div>

                    </div>

                </div>

            </div>

        </header>


        <div class="features_sec31">
        <div class="container">

            <div class="content-menu">
            
                <center>
                    <h2 class="section_title_drakgray center" style="margin-bottom: 30px;"><strong>Wi-Fi</strong> Direct</h2>
                    <p>Create peer-to-peer connections over Wi-Fi</a></p>
                    <br />
                </center>

                <ul>
                    <a href="#what-is-it"><li><i class="fa fa-angle-right"></i>&nbsp; What is it?</li></a>
                    <a href="#how-to-use"><li><i class="fa fa-angle-right"></i>&nbsp; How to use it on Android</li></a>
                    <a href="#limitations"><li><i class="fa fa-angle-right"></i>&nbsp; Limitations of the protocol</li></a>
                </ul>
                
                <ul>
                    <a href="#bugs"><li><i class="fa fa-angle-right"></i>&nbsp; Issues to watch out for</li></a>
                    <a href="#alternatives"><li><i class="fa fa-angle-right"></i>&nbsp; Alternatives to Wi-Fi Direct</li></a>
                </ul>
            </div>
              
        </div>
        </div><!-- end features section31 -->

        <div class="clearfix"></div>

        <div class="features_wifidirect">
        <div class="container">
            <h2 class="section_title_drakgray" id="what-is-it">What is it?</h2>
            <div class="one_half">
                <img src="images/wifi-direct-what-is-it01.png" />

                <p><strong>Wi-Fi Direct allows devices to connect directly to each other</strong> using methods similar to traditional Wi-Fi, except without a pre-established access point. Instead, they negotiate to establish one peer device to act as a software access point for all the other devices in the group.</p>
            </div>

            <div class="one_half last">
                <img src="images/wifi-direct-what-is-it02.png" />

                <p>Devices can connect simultaneously to a Wi-Fi Direct group and a traditional access point.</p>
            </div>

        </div>
        </div>

        <div class="features_dark features_wifidirect">
        <div class="container">
            <h2 id="how-to-use" class="section_title_white">How to use it on Android</h2>
            <ol>
                <li><a href="#initiate_service_discovery">Use service discovery (not peer discovery) to find nearby phones</a></li>
                <li><a href="#connect_to_peers">Connect to the phones you have found</a></li>
                <li><a href="#make_peers_talk">Make peers talk</a></li>
            </ol>


            <div class="container">
            <div class="one_half">
            <p>There are two methods of finding nearby peers:</p>
            <ul>
                <li><strong>Peer discovery</strong> finds all nearby peers with WiFi Direct.</li>
                <li><strong>Service discovery</strong> finds all nearby peers with WiFi Direct that are running the same app.</li>
            </ul>

            </div>

            <div class="one_half last">
                <p><strong>For the purposes of a peer-to-peer app, <em>service discovery</em> is more useful.</strong></p>

            </div>
            </div>
    </div>
    </div>

        <div class="features_wifidirect">
        <div class="container">
            <h2 class="section_title_drakgray"><a id="initiate_service_discovery"></a>Initiate service discovery</h2>
            
            <div class="container">
                <div class="one_half">
                    <h3 class="nocaps">Follow the <a href="http://developer.android.com/training/connect-devices-wirelessly/nsd-wifi-direct.html">developer guide</a></h3>

                    <p>Using Wi-Fi P2P for Service Discovery tells you how to advertise a service on your device so other devices can find you. In our demo, our app advertises itself using a unique string that identifies it as a peer-to-peer Facebook app. This allows devices to find each other using the Data Link Layer before they have established a connection.</p>
                </div>

                <div class="one_half last">
                    <h3 class="nocaps">Watch out for these quirks</h3>
                    <p>
                    In order to find each other, both devices must call <a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#discoverServices(android.net.wifi.p2p.WifiP2pManager.Channel,%20android.net.wifi.p2p.WifiP2pManager.ActionListener)">WiFiP2pManager.discoverServices</a>, not just one. This method puts the devices in the FIND phase, in which they both advertise and listen for nearby services. If you do not call <a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#discoverServices(android.net.wifi.p2p.WifiP2pManager.Channel,%20android.net.wifi.p2p.WifiP2pManager.ActionListener)">WiFiP2pManager.discoverServices</a>, your device will not advertise itself, and other devices will not be able to find it.
                    <a href="https://code.google.com/p/android/issues/detail?id=37425">https://code.google.com/p/android/issues/detail?id=37425</a></p>

                    <p>The Android specification claims that service discovery continues until the phone finds a device, but it was not very reliable in our tests. Sometimes devices failed to find each other, but later found each other if we called <a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#discoverServices(android.net.wifi.p2p.WifiP2pManager.Channel,%20android.net.wifi.p2p.WifiP2pManager.ActionListener)">WiFiP2pManager.discoverServices</a> a second time.</p>
                </div>
            </div>
        </div>
        </div>

    <div class="features_wifidirect">
    <div class="container">
            <h2 class="section_title_drakgray"><a id="connect_to_peers"></a>Connect to peers</h2>

            <div class="container">
                <div class="one_half">
                    <h3 class="nocaps">Follow the <a href="http://developer.android.com/guide/topics/connectivity/wifip2p.html">developer guide</a></h3>

                    <p>Skip the “discovering peers” section. If you’ve followed the previous guide, you’re already using <strong>service discovery</strong> to find peers that are running the specific service you want.</p>
                    <p>Instead, use the code from the “<a href="http://developer.android.com/guide/topics/connectivity/wifip2p.html#connecting">connecting to peers</a>” section.</p>
                </div>

                <div class="one_half last">
                    <h3 class="nocaps">Watch out for these quirks</h3>

                    <p><strong>If you already have a pending connection with a peer, you cannot attempt to connect to a second peer.</strong> If you wish to automatically connect to all the peers you discover, you must add the devices to a queue, and connect to them one at a time. We recommend sorting peers into three queues:</p>
                    <ol>
                        <li>available</li>
                        <li>connecting (max size: 1)</li>
                        <li>connected</li>
                    </ol>
                </div>
            </div>
    </div>
    </div>

    <div class="features_wifidirect">
    <div class="container">
            <h2 class="section_title_drakgray"><a id="make_peers_talk"></a>Make peers talk</h2>
            <div class="container">
            <div class="two_third">
                <img src="images/WiFiDirectPeerTalk1.png">
            </div>

            <div class="one_third last">
                <p>Every phone has a MAC address and an IP address. By the nature of the WiFi Direct connection, the group owner is aware of all the clients MAC addresses, but the clients are not aware of each other.</p>
                <p>In order to get clients to talk to each other, they must be aware of each other. To solve this problem, we needed to make the group owner distribute a list of the clients MAC and IP addresses to all clients.</p>
            </div>
            </div>

            <div class="clearfix divider_dashed9"></div>

            <div class="container">
                <div class="two_third">
                <img src="images/WiFiDirectPeerTalk2.png">

                </div>
                <div class="one_third last">
                <p>Unfortunately, the Wi-Fi Direct API does not give the group owner direct access to the IP addresses of the clients. The group owner only has access to its clients’ MAC addresses. To get access the clients’ IP addresses, we decided to initiate a socket connection from the client to the group owner.</p>

                </div>
            </div>
            
            <div class="clearfix divider_dashed9"></div>

            <div class="container">
                <div class="two_third">
                    <img src="images/WiFiDirectPeerTalk3.png">
                </div>
                <div class="one_third last">
                    <p>Once that socket connection was established, we had the client send a string containing its MAC address to the group owner, so the group owner would be able to add the IP of the socket connection to the known MAC of the client, thereby creating a MAC, IP pair.</p>
                </div>
            </div>

            <div class="clearfix divider_dashed9"></div>

            <div class="container">
                <div class="two_third">
                <img src="images/WiFiDirectPeerTalk4.png">
                </div>
                <div class="one_third last">
                <p>We then had the group owner store all IP, MAC address pairs in a hashmap, and we distributed this hash map via socket connection back to all the clients.</p>
                </div>
            </div>

            
        </div>
        </div>

        <div class="features_wifidirect features_dark">
        <div class="container">
            <h2 id="limitations" class="section_title_white">Limitations of the protocol</h2>

            <h3 class="nocaps white">All connections must be approved by the user</h3>
            <p>As it stands, the Wi-Fi Direct implementation on Android requires a user to accept an incoming connection the first time the phones connect. There is a pending Android feature request for a way to automatically accept connections in Wi-Fi Direct.</p>

            <p><a href="https://code.google.com/p/android/issues/detail?id=30880">https://code.google.com/p/android/issues/detail?id=30880</a></p>

            <p>You can automatically reconnect to a group to which you have already connected, because Wi-Fi Direct contains a specification for remembering “persistent groups,” but these groups are fairly rigid, because the group owner of the previously formed persistent group must remain the group owner, when the group is re-formed.</p>

            <p><a href="http://stackoverflow.com/questions/15152817/persistent-group-in-wi-fi-direct">http://stackoverflow.com/questions/15152817/persistent-group-in-wi-fi-direct</a></p>
            
            <h3 class="nocaps white">A spoke network is the only possible topology</h3>
            <p>The network requires one, and only one, peer to act as a software access point.</p>

            <h3 class="nocaps white">There are no ad-hoc capabilities</h3>
            <p>The network cannot dynamically change. If a group owner drops out, the network dies.</p>

        </div>
        </div>

        <div class="features_wifidirect">
        <div class="container">
            <h2 id="bugs" class="section_title_drakgray">Issues to watch out for</h2>

           <h3 class="nocaps">Only use Wi-Fi Direct on Android 4.2 Jelly Bean and above</h3>
           <p>It is buggy on versions below 4.2. <a href="https://code.google.com/p/android/issues/detail?id=43004">https://code.google.com/p/android/issues/detail?id=43004</a></p>

           <h3 class="nocaps">The MAC address of a device reported by service discovery differs from the hardware address of the network interface that is actually used by the connection.</h3>
           <p>This is intentional, but can be confusing if you are unaware.</p>
           <p><a href="">https://code.google.com/p/android/issues/detail?id=53437</a></p>

           <h3 class="nocaps">Wi-Fi Direct is not fully supported on all hardware, even if it running Android 4.4.2 or later.</h3>
           <p>For example, the Moto G cannot connect to a Wi-Fi Direct group and a standard Wi-Fi AP at the same time.</p>

           <h3 class="nocaps">In addition, we encountered some problems when running on the Nexus 5 with Android 4.4.2.</h3>

           <p>We were unable to find bug reports for any of the following issues we encountered, but they are worth noting. Some of them may be due to bugs in our demo app; some of them may be bugs in the Wi-Fi Direct implementation. We never found fixes for them, so instead we implemented workarounds.</p>

           <p>Sometimes when running our app, service discovery would fail with <a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#NO_SERVICE_REQUESTS">Error code 3 (No Service Requests)</a>.</p>

           <p>One device would sometimes initiate a connection, but the other device would not connect back.</p>

           <p>When a new device would join a group, the other devices would sometimes momentarily think they were disconnected from everyone. We observed this behavior several times.</p>
        

        </div>
        </div>
        
        <div class="features_wifidirect">
        <div class="container">
            <h2 id="alternatives" class="section_title_drakgray">Alternatives to Wi-Fi Direct</h2>

            <h3 class="nocaps">Mobile Ad-hoc Networking (MANET) using 802.11 ad-hoc mode and IETF routing protocols</h3>

            <p>Mobile Ad-hoc Networks are decentralized networks designed for situations where nodes are moving around, and forming new neighbors frequently. In a MANET, every node is a router.</p>

            <p>A MANET can be created by implementing peer-to-peer communication in the Data Link Layer (layer 2) and implementing a routing protocol in the Network Layer (layer 3) of the OSI model. </p> 

            <p>IEEE 802.11 has an ad-hoc mode that can be used for peer-to-peer communication, and the IETF has developed <a href="http://datatracker.ietf.org/wg/manet/">routing protocols</a> to sit on top of that.</p>

            <p><strong>Wi-Fi Direct ≠ 802.11 ad-hoc mode</strong></p>
            <p>The Wi-Fi alliance decided to build Wi-Fi Direct on top of the 802.11 <strong>infrastructure mode</strong>, because it is much more widely supported among devices. In Wi-Fi Direct, all devices in a group must still be connected to a Group Owner, who acts as a software access point.<p>

            <p><strong>Wi-Fi Direct</strong> uses the common 802.11 infrastructure mode because it is more widely supported, it avoids power consumption issues that are still being ironed out in ad-hoc mode<sup><a href="#1">[1]</a></sup>, and it can easily use WPA-2. Wi-Fi Direct more easily implements power-saving modes because a Wi-Fi Direct group is always fully connected, which makes it much easier to synchronize power saving state among peers.</p>

            <p>A MANET allows for much more flexible network configurations than Wi-Fi Direct. Clearly, a MANET would be optimal for creating a peer-to-peer version of Facebook because peers are constantly moving in and out of range of new peers. Unfortunately, <strong>802.11 ad-hoc mode is not supported in Android</strong> (there is a <a href="https://code.google.com/p/android/issues/detail?id=82">pending feature request</a>).</p>

            <p id="1">
            [1] Quorum-Based Asynchronous Power-Saving Protocols for IEEE 802.11 Ad Hoc Networks <br>
            <a href="">http://dx.doi.org/10.1023/B%3AMONE.0000048553.45798.5e</a>
            </p>
        </div>
        </div>

        <div class="features_wifidirect">
        <div class="container">
            <h2 class="section_title_drakgray">Read more about the Wi-Fi Direct specification</h2>
            <ul>
                <li><a href="http://blog.broadcom.com/wp-content/uploads/2013/10/Wi-Fi-Direct-White-Paper.pdf">Wi-Fi Direct Overview</a></li>
                <li><a href="http://hsc.com/Portals/0/Uploads/Articles/WFD_Technology_Whitepaper_v_1.7635035318321315728.pdf">Wi-Fi Direct White Paper</a></li>
                <li><a href="http://www.campsmur.cat/files/camps_ssavedra_serrano_WCM_11_00112_final_version.pdf">Device to device communications with WiFi Direct: overview and experimentation</a></li>
            </ul>
        </div>
        </div>

        <div class="footer1">
            <div class="container">
            <div class="two_third">
                <p>&copy; 2014, Aman Kapur, Cypress Frankenfeld, Keely Haverstock, Sarah Strohkorb</p>
            </div>
        </div>

    </div>

</body>
</html>